pipeline{
    agent any
    options
    {
        timestamps()
    }
    stages
    {
        stage('Paralle Executor'){
        parallel{
        stage('exe-1')
        {
            steps
            {
                            echo "Executing the first job."
                            sleep(5)
            }
        }
        stage('exe-2')
        {
            steps
            {
                            echo "Executing the second job."
                                                        sleep(5)

            }        }
        stage('exe-3')
        {
            steps
            {
                            echo "Executing the third job."
                                                        sleep(5)

            }        }
        }
        }
        stage('Exception Handling')
        {
            steps
            {
                script
                {
                    try{
                        def result= 10/0
                    }
                    catch(Exception e)
                    {
                        echo "some exception occured:${e}"
                    }
                    finally{
                        echo "Exception handled successfully."
                    }
                }
            }
        }
    }
    post{
        always
        {
            cleanWs()
            echo "work space got cleaned."
        }
        success{
            emailext(
                subject:'build success ${env.JOB_NAME}',
                body:'Build passed successfully',
                to:'sudhansu.gouda@equbot.com'
            )
        }
        failure{
  emailext(
                subject:'build failure ${env.JOB_NAME}',
                body:'Build failed',
                to:'sudhansu.gouda@equbot.com'
            )
        }
        }
    }
